2025-06-10 20:32:18,827 - fastapi_service.app.main - INFO - Application starting up...
2025-06-10 20:32:18,828 - fastapi_service.app.dependencies - INFO - Initializing singleton TopStepXProvider instance (Attempt 1/5)...
2025-06-10 20:32:18,865 - tradeforgepy.providers.topstepx.client - INFO - TopStepXHttpClient initialized for LIVE environment. User: cay7man
2025-06-10 20:32:18,866 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider initialized for environment: LIVE
2025-06-10 20:32:18,866 - tradeforgepy.providers.topstepx.client - INFO - Authenticating TopStepX user: cay7man
2025-06-10 20:32:19,272 - httpx - INFO - HTTP Request: POST https://api.topstepx.com/api/Auth/loginKey "HTTP/1.1 200 OK"
2025-06-10 20:32:19,272 - tradeforgepy.providers.topstepx.client - INFO - TopStepX auth successful.
2025-06-10 20:32:19,273 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider HTTP client connected and authenticated successfully.
2025-06-10 20:32:19,273 - fastapi_service.app.dependencies - INFO - Subscribing to Market Data for CON.F.US.EP.M25...
2025-06-10 20:32:19,273 - tradeforgepy.providers.topstepx.streams - INFO - BaseTopStepXStream 'MarketStream' initialized for URL: rtc.topstepx.com/hubs/market
2025-06-10 20:32:19,273 - tradeforgepy.providers.topstepx.streams - INFO - BaseTopStepXStream 'UserStream' initialized for URL: rtc.topstepx.com/hubs/user
2025-06-10 20:32:19,273 - fastapi_service.app.dependencies - INFO - Subscribing to User Data for Account 8391036...
2025-06-10 20:32:19,273 - fastapi_service.app.dependencies - INFO - TopStepXProvider initialized and connected successfully.
2025-06-10 20:32:19,273 - fastapi_service.app.main - INFO - Trading provider successfully initialized during startup.
2025-06-10 20:32:19,273 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider running 2 stream(s) concurrently.
2025-06-10 20:32:19,274 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: DISCONNECTED -> CONNECTING (Reason: N/A)
2025-06-10 20:32:19,274 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream starting run loop...
2025-06-10 20:32:19,274 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: DISCONNECTED -> CONNECTING (Reason: N/A)
2025-06-10 20:32:19,274 - tradeforgepy.providers.topstepx.streams - INFO - UserStream starting run loop...
2025-06-10 20:32:19,274 - pysignalr.transport - INFO - State change: disconnected -> connecting
2025-06-10 20:32:19,274 - pysignalr.transport - INFO - Performing negotiation, URL: `https://rtc.topstepx.com/hubs/market/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjEyNjcxNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL3NpZCI6IjY5MmRhYmZhLTY5NDEtNDU4Ni05MmVjLTMxYzkzMGJjNTE3MiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJjYXk3bWFuIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoidXNlciIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvYXV0aGVudGljYXRpb25tZXRob2QiOiJhcGkta2V5IiwibXNkIjoiQ01FR1JPVVBfVE9CIiwibWZhIjoidmVyaWZpZWQiLCJleHAiOjE3NDk2OTkxMzh9.V2M3zFb2cNjnTUR3Wx6Z1WjQrbHipOYgfbpKCSpbBlU`
2025-06-10 20:32:19,275 - pysignalr.transport - INFO - State change: disconnected -> connecting
2025-06-10 20:32:19,275 - pysignalr.transport - INFO - Performing negotiation, URL: `https://rtc.topstepx.com/hubs/user/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjEyNjcxNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL3NpZCI6IjY5MmRhYmZhLTY5NDEtNDU4Ni05MmVjLTMxYzkzMGJjNTE3MiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJjYXk3bWFuIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoidXNlciIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvYXV0aGVudGljYXRpb25tZXRob2QiOiJhcGkta2V5IiwibXNkIjoiQ01FR1JPVVBfVE9CIiwibWZhIjoidmVyaWZpZWQiLCJleHAiOjE3NDk2OTkxMzh9.V2M3zFb2cNjnTUR3Wx6Z1WjQrbHipOYgfbpKCSpbBlU`
2025-06-10 20:32:19,707 - pysignalr.transport - INFO - Negotiation completed
2025-06-10 20:32:19,731 - pysignalr.transport - INFO - Negotiation completed
2025-06-10 20:32:20,041 - pysignalr.transport - INFO - Sending handshake to server
2025-06-10 20:32:20,043 - pysignalr.transport - INFO - Awaiting handshake from server
2025-06-10 20:32:20,048 - pysignalr.transport - INFO - Sending handshake to server
2025-06-10 20:32:20,048 - pysignalr.transport - INFO - Awaiting handshake from server
2025-06-10 20:32:20,129 - pysignalr.transport - INFO - State change: connecting -> connected
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: CONNECTING -> CONNECTED (Reason: SignalR connection established)
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - UserStream sending command: 'SubscribeAccounts' with args []
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - UserStream sending command: 'SubscribeOrders' with args [8391036]
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - UserStream sending command: 'SubscribePositions' with args [8391036]
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - UserStream sending command: 'SubscribeTrades' with args [8391036]
2025-06-10 20:32:20,129 - pysignalr.transport - INFO - State change: connecting -> connected
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: CONNECTING -> CONNECTED (Reason: SignalR connection established)
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream sending command: 'SubscribeContractQuotes' with args ['CON.F.US.EP.M25']
2025-06-10 20:32:20,129 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream sending command: 'SubscribeContractMarketDepth' with args ['CON.F.US.EP.M25']
2025-06-10 20:32:31,309 - pysignalr.client - WARNING - No client method with the name 'GatewayLogout' found.
2025-06-10 20:32:31,310 - pysignalr.client - WARNING - No client method with the name 'GatewayLogout' found.
2025-06-10 20:32:38,504 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154799, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:38.1732663+00:00', 'updateTimestamp': '2025-06-11T03:32:38.1732663+00:00', 'status': 6, 'type': 1, 'side': 1, 'size': 1, 'limitPrice': 6033.75, 'fillVolume': 0}}
2025-06-10 20:32:38,509 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154799, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:38.1732663+00:00', 'updateTimestamp': '2025-06-11T03:32:38.1804791+00:00', 'status': 1, 'type': 1, 'side': 1, 'size': 1, 'limitPrice': 6033.75, 'fillVolume': 0}}
2025-06-10 20:32:42,838 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154799, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:38.173266+00:00', 'updateTimestamp': '2025-06-11T03:32:42.5085794+00:00', 'status': 1, 'type': 1, 'side': 1, 'size': 1, 'limitPrice': 6027.75, 'fillVolume': 0}}
2025-06-10 20:32:42,846 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserTrade` data. Payload: {'action': 0, 'data': {'id': 1021196189, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5152529+00:00', 'price': 6027.75, 'fees': 0.37, 'side': 1, 'size': 1, 'voided': False, 'orderId': 1232154799}}
2025-06-10 20:32:42,846 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154799, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:38.173266+00:00', 'updateTimestamp': '2025-06-11T03:32:42.508579+00:00', 'status': 2, 'type': 1, 'side': 1, 'size': 1, 'limitPrice': 6027.75, 'fillVolume': 1}}
2025-06-10 20:32:42,855 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserPosition` data. Payload: {'action': 1, 'data': {'id': 277313990, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5224173+00:00', 'type': 2, 'size': 1, 'averagePrice': 6027.75}}
2025-06-10 20:32:42,862 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154866, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5288005+00:00', 'updateTimestamp': '2025-06-11T03:32:42.5288005+00:00', 'status': 1, 'type': 4, 'side': 0, 'size': 1, 'stopPrice': 6043.75, 'fillVolume': 0}}
2025-06-10 20:32:42,862 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserPosition` data. Payload: {'action': 1, 'data': {'id': 277313990, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5224173+00:00', 'type': 2, 'size': 1, 'averagePrice': 6027.75}}
2025-06-10 20:32:42,862 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154867, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5288005+00:00', 'updateTimestamp': '2025-06-11T03:32:42.5288005+00:00', 'status': 1, 'type': 1, 'side': 0, 'size': 1, 'limitPrice': 5967.75, 'fillVolume': 0}}
2025-06-10 20:32:42,864 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserPosition` data. Payload: {'action': 1, 'data': {'id': 277313990, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5224173+00:00', 'type': 2, 'size': 1, 'averagePrice': 6027.75}}
2025-06-10 20:32:45,273 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154866, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5288+00:00', 'updateTimestamp': '2025-06-11T03:32:44.9416752+00:00', 'status': 3, 'type': 4, 'side': 0, 'size': 1, 'stopPrice': 6043.75, 'fillVolume': 0}}
2025-06-10 20:32:45,273 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154867, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.5288+00:00', 'updateTimestamp': '2025-06-11T03:32:44.941686+00:00', 'status': 3, 'type': 1, 'side': 0, 'size': 1, 'limitPrice': 5967.75, 'fillVolume': 0}}
2025-06-10 20:32:45,280 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserPosition` data. Payload: {'action': 1, 'data': {'id': 277313990, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.522417+00:00', 'type': 2, 'size': 1, 'averagePrice': 6027.75}}
2025-06-10 20:32:46,356 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154984, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:46.0263574+00:00', 'updateTimestamp': '2025-06-11T03:32:46.0263574+00:00', 'status': 6, 'type': 2, 'side': 0, 'size': 1, 'fillVolume': 0}}
2025-06-10 20:32:46,362 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserTrade` data. Payload: {'action': 0, 'data': {'id': 1021196474, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:46.0310255+00:00', 'price': 6028.25, 'profitAndLoss': -2.5, 'fees': 0.37, 'side': 0, 'size': 1, 'voided': False, 'orderId': 1232154984}}
2025-06-10 20:32:46,362 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserTrade` data. Payload: {'action': 1, 'data': {'id': 1021196189, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.515252+00:00', 'price': 6027.75, 'fees': 0.37, 'side': 1, 'size': 1, 'voided': False, 'orderId': 1232154799}}
2025-06-10 20:32:46,363 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserOrder` data. Payload: {'action': 1, 'data': {'id': 1232154984, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:46.0263574+00:00', 'updateTimestamp': '2025-06-11T03:32:46.0263574+00:00', 'status': 2, 'type': 2, 'side': 0, 'size': 1, 'fillVolume': 1}}
2025-06-10 20:32:46,368 - tradeforgepy.providers.topstepx.mapper - WARNING - Mapper logic requires live `GatewayUserPosition` data. Payload: {'action': 2, 'data': {'id': 277313990, 'accountId': 8391036, 'contractId': 'CON.F.US.MES.M25', 'creationTimestamp': '2025-06-11T03:32:42.522417+00:00', 'type': 0, 'size': 0, 'averagePrice': 6027.75}}
2025-06-10 20:32:52,080 - fastapi_service.app.main - INFO - Application shutting down...
2025-06-10 20:32:52,080 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider disconnecting...
2025-06-10 20:32:52,081 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream run task cancelled.
2025-06-10 20:32:52,082 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: CONNECTED -> DISCONNECTED (Reason: Run loop finished unexpectedly)
2025-06-10 20:32:52,082 - tradeforgepy.providers.topstepx.streams - INFO - UserStream run task cancelled.
2025-06-10 20:32:52,083 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: CONNECTED -> DISCONNECTED (Reason: Run loop finished unexpectedly)
2025-06-10 20:32:52,083 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider stream runner task was cancelled.
2025-06-10 20:32:52,085 - tradeforgepy.providers.topstepx.provider - INFO - Provider's main run_forever task was cancelled.
2025-06-10 20:32:52,085 - tradeforgepy.providers.topstepx.client - INFO - Closing TopStepXHttpClient's async client session.
2025-06-10 20:32:52,086 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider disconnected.
2025-06-10 20:32:52,086 - fastapi_service.app.main - INFO - Trading provider disconnected.
