2025-06-10 20:25:14,514 - fastapi_service.app.main - INFO - Application starting up...
2025-06-10 20:25:14,516 - fastapi_service.app.dependencies - INFO - Initializing singleton TopStepXProvider instance (Attempt 1/5)...
2025-06-10 20:25:14,561 - tradeforgepy.providers.topstepx.client - INFO - TopStepXHttpClient initialized for LIVE environment. User: cay7man
2025-06-10 20:25:14,561 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider initialized for environment: LIVE
2025-06-10 20:25:14,561 - tradeforgepy.providers.topstepx.client - INFO - Authenticating TopStepX user: cay7man
2025-06-10 20:25:14,958 - httpx - INFO - HTTP Request: POST https://api.topstepx.com/api/Auth/loginKey "HTTP/1.1 200 OK"
2025-06-10 20:25:14,960 - tradeforgepy.providers.topstepx.client - INFO - TopStepX auth successful.
2025-06-10 20:25:14,960 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider HTTP client connected and authenticated successfully.
2025-06-10 20:25:14,961 - fastapi_service.app.dependencies - INFO - Temporarily subscribing to CON.F.US.EP.M25 for data capture...
2025-06-10 20:25:14,962 - tradeforgepy.providers.topstepx.streams - INFO - BaseTopStepXStream 'MarketStream' initialized for URL: rtc.topstepx.com/hubs/market
2025-06-10 20:25:14,962 - tradeforgepy.providers.topstepx.streams - INFO - BaseTopStepXStream 'UserStream' initialized for URL: rtc.topstepx.com/hubs/user
2025-06-10 20:25:14,962 - fastapi_service.app.dependencies - INFO - TopStepXProvider initialized and connected successfully.
2025-06-10 20:25:14,963 - fastapi_service.app.main - INFO - Trading provider successfully initialized during startup.
2025-06-10 20:25:14,963 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider running 2 stream(s) concurrently.
2025-06-10 20:25:14,963 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: DISCONNECTED -> CONNECTING (Reason: N/A)
2025-06-10 20:25:14,963 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream starting run loop...
2025-06-10 20:25:14,963 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: DISCONNECTED -> CONNECTING (Reason: N/A)
2025-06-10 20:25:14,963 - tradeforgepy.providers.topstepx.streams - INFO - UserStream starting run loop...
2025-06-10 20:25:14,963 - pysignalr.transport - INFO - State change: disconnected -> connecting
2025-06-10 20:25:14,963 - pysignalr.transport - INFO - Performing negotiation, URL: `https://rtc.topstepx.com/hubs/market/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjEyNjcxNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL3NpZCI6ImQ5NWRhMjU3LWViNzctNGYzZC04YjUzLThkZmMyNmE4ODA1NiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJjYXk3bWFuIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoidXNlciIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvYXV0aGVudGljYXRpb25tZXRob2QiOiJhcGkta2V5IiwibXNkIjoiQ01FR1JPVVBfVE9CIiwibWZhIjoidmVyaWZpZWQiLCJleHAiOjE3NDk2OTg3MTR9.k7cXQQQ50cv_hFdH3OUXeFXkYa1SOLrmc3_kRbUHrOE`
2025-06-10 20:25:14,964 - pysignalr.transport - INFO - State change: disconnected -> connecting
2025-06-10 20:25:14,964 - pysignalr.transport - INFO - Performing negotiation, URL: `https://rtc.topstepx.com/hubs/user/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1laWRlbnRpZmllciI6IjEyNjcxNiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL3NpZCI6ImQ5NWRhMjU3LWViNzctNGYzZC04YjUzLThkZmMyNmE4ODA1NiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWUiOiJjYXk3bWFuIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoidXNlciIsImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vd3MvMjAwOC8wNi9pZGVudGl0eS9jbGFpbXMvYXV0aGVudGljYXRpb25tZXRob2QiOiJhcGkta2V5IiwibXNkIjoiQ01FR1JPVVBfVE9CIiwibWZhIjoidmVyaWZpZWQiLCJleHAiOjE3NDk2OTg3MTR9.k7cXQQQ50cv_hFdH3OUXeFXkYa1SOLrmc3_kRbUHrOE`
2025-06-10 20:25:15,412 - pysignalr.transport - INFO - Negotiation completed
2025-06-10 20:25:15,427 - pysignalr.transport - INFO - Negotiation completed
2025-06-10 20:25:15,726 - pysignalr.transport - INFO - Sending handshake to server
2025-06-10 20:25:15,727 - pysignalr.transport - INFO - Awaiting handshake from server
2025-06-10 20:25:15,733 - pysignalr.transport - INFO - Sending handshake to server
2025-06-10 20:25:15,734 - pysignalr.transport - INFO - Awaiting handshake from server
2025-06-10 20:25:15,801 - pysignalr.transport - INFO - State change: connecting -> connected
2025-06-10 20:25:15,802 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: CONNECTING -> CONNECTED (Reason: SignalR connection established)
2025-06-10 20:25:15,802 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream sending command: 'SubscribeContractQuotes' with args ['CON.F.US.EP.M25']
2025-06-10 20:25:15,805 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream sending command: 'SubscribeContractMarketDepth' with args ['CON.F.US.EP.M25']
2025-06-10 20:25:15,814 - pysignalr.transport - INFO - State change: connecting -> connected
2025-06-10 20:25:15,814 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: CONNECTING -> CONNECTED (Reason: SignalR connection established)
2025-06-10 20:25:26,529 - pysignalr.client - WARNING - No client method with the name 'GatewayLogout' found.
2025-06-10 20:25:26,530 - pysignalr.client - WARNING - No client method with the name 'GatewayLogout' found.
2025-06-10 20:30:07,418 - fastapi_service.app.main - INFO - Application shutting down...
2025-06-10 20:30:07,419 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider disconnecting...
2025-06-10 20:30:07,419 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream run task cancelled.
2025-06-10 20:30:07,419 - tradeforgepy.providers.topstepx.streams - INFO - MarketStream status: CONNECTED -> DISCONNECTED (Reason: Run loop finished unexpectedly)
2025-06-10 20:30:07,419 - tradeforgepy.providers.topstepx.streams - INFO - UserStream run task cancelled.
2025-06-10 20:30:07,419 - tradeforgepy.providers.topstepx.streams - INFO - UserStream status: CONNECTED -> DISCONNECTED (Reason: Run loop finished unexpectedly)
2025-06-10 20:30:07,420 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider stream runner task was cancelled.
2025-06-10 20:30:07,420 - tradeforgepy.providers.topstepx.provider - INFO - Provider's main run_forever task was cancelled.
2025-06-10 20:30:07,420 - tradeforgepy.providers.topstepx.client - INFO - Closing TopStepXHttpClient's async client session.
2025-06-10 20:30:07,420 - tradeforgepy.providers.topstepx.provider - INFO - TopStepXProvider disconnected.
2025-06-10 20:30:07,420 - fastapi_service.app.main - INFO - Trading provider disconnected.
